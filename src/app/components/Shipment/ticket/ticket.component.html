<!doctype html>
<html lang="en">

<body>
  <section class="space">
    <div class="container">
      <div class="row">
        <div class="col-lg-9">
          <label for="sort">排序：</label>
          <select id="sort" name="sort" [(ngModel)]="selectedSortBy" (change)="applyFilter()">
            <option value="default">預設排序</option>
            <option value="priceAsc">價格：低到高</option>
            <option value="priceDesc">價格：高到低</option>
            <option value="latest">最新路線</option>
          </select>
          <div class="page-size-selector">
            <label for="pageSize">每頁顯示:</label>
            <select id="pageSize" [(ngModel)]="pageSize" (change)="onPageSizeChange(pageSize)">
              <option *ngFor="let size of pageSizeOptions" [value]="size">{{ size }}</option>
            </select>
          </div>
          <div class="row">
            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-12" *ngFor="let shipment of sortedShipments">
              <div class="destination-style1">
                <a [routerLink]="['/shipment-detail', shipment.routeId]">
                  <img *ngIf="shipment.imageUrl || shipment.imageBase64"
                    [src]="shipment.imageUrl ? shipment.imageUrl : ('data:image/jpeg;base64,' + shipment.imageBase64)"
                    alt="destination image" style="width: 550px; height: 300px;" />
                </a>
                <span class="destination-price">{{ shipment.price | currency }}</span>
                <div class="destination-info">
                  <h4 class="destination-name">
                    <a href="#">{{ shipment.originPortName }} - {{ shipment.destinationPortName }}</a>
                  </h4>
                  <p class="destination-text">{{ shipment.routeDescription }}</p>
                </div>
              </div>
            </div>
          </div>

          <div class="vs-pagination pt-lg-2">
            <ul>
              <li *ngIf="pageNumber > 1">
                <a (click)="onPageChange(pageNumber - 1)"><i class="fas fa-chevron-left"></i></a>
              </li>
          
              <li *ngFor="let page of [].constructor(getTotalPages()); let i = index">
                <a (click)="onPageChange(i + 1)" [class.active]="i + 1 === pageNumber">{{ i + 1 }}</a>
              </li>
          
              <li *ngIf="pageNumber < getTotalPages()">
                <a (click)="onPageChange(pageNumber + 1)"><i class="fas fa-chevron-right"></i></a>
              </li>
            </ul>
          </div>
          

        <div class="col-lg-3 col-md-4 mb-4">
          <div class="sidebar-area">
            <div class="location-selector">
              <div>
                <label for="originPort">出發地</label>
                <select id="originPort" class="form-select" [(ngModel)]="selectedOriginPort" (change)="onOriginPortChange()" required>
                  <option value="" disabled selected>請選擇出發地</option>
                  <option *ngFor="let origin of origins" [value]="origin">{{ origin }}</option>
                </select>
              </div>
              
              <div>
                <label for="destinationPort">目的地</label>
                <select id="destinationPort" class="form-select" [(ngModel)]="selectedDestinationPort">
                  <option value="">請選擇目的地</option>
                  <option *ngFor="let destination of destinations" [value]="destination">{{ destination }}</option>
                </select>
              </div>
              
              <button id="searchBtn" class="btn btn-primary" (click)="onSearch()">查詢</button>
              
              <div id="resultContainer"></div>
            </div>
          </div>
        </div>
      </div>
    </div></div>
  </section>

  <!--============================== All Js File ============================== -->
  <script src="assets/js/vendor/jquery-3.6.0.min.js"></script>
  <script src="assets/js/slick.min.js"></script>
  <script src="assets/js/bootstrap.min.js"></script>
  <script src="assets/js/jquery.magnific-popup.min.js"></script>
  <script src="assets/js/jquery-ui.min.js"></script>
  <script src="assets/js/circle-progress.min.js"></script>
  <script src="assets/js/imagesLoaded.js"></script>
  <script src="assets/js/isotope.js"></script>
  <script src="assets/js/wow.min.js"></script>
  <script src="assets/js/main.js"></script>
</body>

</html>
